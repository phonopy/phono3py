
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Force constants calculation with cutoff pair-distance &#8212; Phono3py v.2.3.1</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="External tools" href="external-tools.html" />
    <link rel="prev" title="Workload distribution" href="workload-distribution.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Phono3py v.2.3.1</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="install.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="workflow.html">
   Workflow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="examples.html">
   Examples
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="interfaces.html">
   Interfaces to calculators (VASP, QE, CRYSTAL, Abinit, TURBOMOLE)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="vasp.html">
     VASP &amp; phono3py calculation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="qe.html">
     Quantum ESPRESSO (pw) &amp; phono3py calculation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="crystal.html">
     CRYSTAL &amp; phono3py calculation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="turbomole.html">
     TURBOMOLE &amp; phono3py calculation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="command-options.html">
   Command options / Setting tags
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="input-output-files.html">
   Input / Output files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="hdf5_howto.html">
   How to read the results stored in hdf5 files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="auxiliary-tools.html">
   Auxiliary tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="direct-solution.html">
   Direct solution of linearized phonon Boltzmann equation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="workload-distribution.html">
   Workload distribution
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Force constants calculation with cutoff pair-distance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="external-tools.html">
   External tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="phono3py-api.html">
   Phono3py API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tips.html">
   Tips
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="citation.html">
   How to cite phono3py
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Change Log
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/cutoff-pair.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-cutff-pair-distance-in-phono3py">
   What is cutff pair-distance in phono3py?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-supercells-with-displacements">
     Creating supercells with displacements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#supercell-files">
     Supercell files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#special-phono3py-disp-yaml">
     Special
     <code class="docutils literal notranslate">
      <span class="pre">
       phono3py_disp.yaml
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#making-forces-fc3">
     Making
     <code class="docutils literal notranslate">
      <span class="pre">
       FORCES_FC3
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-phonon-phonon-interaction-calculation">
     Running phonon-phonon interaction calculation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-script-extract-supercell-ids-from-phono3py-disp-yaml">
   A script extract supercell IDs from
   <code class="docutils literal notranslate">
    <span class="pre">
     phono3py_disp.yaml
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tests">
   Tests
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#si-pbe">
     Si-PBE
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aln-lda">
     AlN-LDA
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Force constants calculation with cutoff pair-distance</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-is-cutff-pair-distance-in-phono3py">
   What is cutff pair-distance in phono3py?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-supercells-with-displacements">
     Creating supercells with displacements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#supercell-files">
     Supercell files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#special-phono3py-disp-yaml">
     Special
     <code class="docutils literal notranslate">
      <span class="pre">
       phono3py_disp.yaml
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#making-forces-fc3">
     Making
     <code class="docutils literal notranslate">
      <span class="pre">
       FORCES_FC3
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-phonon-phonon-interaction-calculation">
     Running phonon-phonon interaction calculation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-script-extract-supercell-ids-from-phono3py-disp-yaml">
   A script extract supercell IDs from
   <code class="docutils literal notranslate">
    <span class="pre">
     phono3py_disp.yaml
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tests">
   Tests
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#si-pbe">
     Si-PBE
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aln-lda">
     AlN-LDA
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="force-constants-calculation-with-cutoff-pair-distance">
<span id="command-cutoff-pair"></span><h1>Force constants calculation with cutoff pair-distance<a class="headerlink" href="#force-constants-calculation-with-cutoff-pair-distance" title="Permalink to this headline">#</a></h1>
<p>Here the detail of the command option <a class="reference internal" href="command-options.html#cutoff-pair-option"><span class="std std-ref">–cutoff_pair</span></a> is explained.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#what-is-cutff-pair-distance-in-phono3py" id="id1">What is cutff pair-distance in phono3py?</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id2">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-supercells-with-displacements" id="id3">Creating supercells with displacements</a></p></li>
<li><p><a class="reference internal" href="#supercell-files" id="id4">Supercell files</a></p></li>
<li><p><a class="reference internal" href="#special-phono3py-disp-yaml" id="id5">Special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code></a></p></li>
<li><p><a class="reference internal" href="#making-forces-fc3" id="id6">Making <code class="docutils literal notranslate"><span class="pre">FORCES_FC3</span></code></a></p></li>
<li><p><a class="reference internal" href="#running-phonon-phonon-interaction-calculation" id="id7">Running phonon-phonon interaction calculation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#a-script-extract-supercell-ids-from-phono3py-disp-yaml" id="id8">A script extract supercell IDs from <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code></a></p></li>
<li><p><a class="reference internal" href="#tests" id="id9">Tests</a></p>
<ul>
<li><p><a class="reference internal" href="#si-pbe" id="id10">Si-PBE</a></p></li>
<li><p><a class="reference internal" href="#aln-lda" id="id11">AlN-LDA</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="what-is-cutff-pair-distance-in-phono3py">
<h2><a class="toc-backref" href="#id1">What is cutff pair-distance in phono3py?</a><a class="headerlink" href="#what-is-cutff-pair-distance-in-phono3py" title="Permalink to this headline">#</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option, number of supercells with
displacements to be calculated is reduced. But of course this
sacrifices the accuracy of third-order force constants (fc3).</p>
<p>In phono3py, to obtain supercell-fc3,
<span class="math notranslate nohighlight">\(\Phi_{\alpha\beta\gamma}(jl, j'l', j''l'')\)</span>, forces in many
supercells having different pairs of displaced atoms are computed
using some force-calculator such as ab-initio code. In the phono3py
default behaviour, full elements of supercell-fc3 are computed. In
this case, though depending on the number of atoms in the supercell
and the crystal symmetry, the number of atomic-pair configuration can
be huge and beyond our computational resource.</p>
<p>Sometimes we may expect that interaction range of fc3 among triplets
of atoms is shorter than chosen supercell size. If it is the case, we
may be allowed to omit computing some elements of supercell-fc3. This
is what achieved by <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option.</p>
<p>A supercell-fc3 element is specified by three atomic
displacements. Two of three are finitely displaced
(<span class="math notranslate nohighlight">\(\Delta\mathbf{r}_1\)</span> and <span class="math notranslate nohighlight">\(\Delta\mathbf{r}_2\)</span>) but one of
them is included in a force given by the force calculator such as
<span class="math notranslate nohighlight">\(\mathbf{F}_3=-\frac{\partial V}{\partial\mathbf{r}_3}\)</span>. The
cutoff distance <span class="math notranslate nohighlight">\(d_\text{cut}\)</span> is defined as the upper bound of
the distance between the atoms 1 and 2. By this, the set of atomic
pairs <span class="math notranslate nohighlight">\(\{(\mathbf{r}_1,\mathbf{r}_2)| |\mathbf{r}_1 -
\mathbf{r}_2| &lt; d_\text{cut}\}\)</span> is selected for the supercell-fc3
calculation. By this, when three distances among the three atoms of
triplets are all larger than <span class="math notranslate nohighlight">\(d_\text{cut}\)</span>, those fc3 elements
can not be obtained and so they are simply set zero.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id2">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">#</a></h2>
<div class="section" id="creating-supercells-with-displacements">
<h3><a class="toc-backref" href="#id3">Creating supercells with displacements</a><a class="headerlink" href="#creating-supercells-with-displacements" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option is employed when creating supercells with
displacements, therefore this option must be used with <code class="docutils literal notranslate"><span class="pre">-d</span></code> option
when running phono3py, for the Si-PBEsol example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% phono3py --cutoff-pair<span class="o">=</span><span class="m">5</span> -d --dim<span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> -c POSCAR-unitcell
...

Unit cell was <span class="nb">read</span> from <span class="s2">&quot;POSCAR-unitcell&quot;</span>.
Displacement distance: <span class="m">0</span>.03
Number of displacements: <span class="m">111</span>
Cutoff distance <span class="k">for</span> displacements: <span class="m">5</span>.0
Number of displacement supercell files created: <span class="m">51</span>

Displacement dataset was written <span class="k">in</span> <span class="s2">&quot;phono3py_disp.yaml&quot;</span>.
...

% ls POSCAR-0*
POSCAR-00001  POSCAR-00032  POSCAR-00043  POSCAR-00080  POSCAR-00097
POSCAR-00002  POSCAR-00033  POSCAR-00070  POSCAR-00081  POSCAR-00098
POSCAR-00003  POSCAR-00034  POSCAR-00071  POSCAR-00082  POSCAR-00099
POSCAR-00016  POSCAR-00035  POSCAR-00072  POSCAR-00083  POSCAR-00100
POSCAR-00017  POSCAR-00036  POSCAR-00073  POSCAR-00084  POSCAR-00101
POSCAR-00018  POSCAR-00037  POSCAR-00074  POSCAR-00085  POSCAR-00102
POSCAR-00019  POSCAR-00038  POSCAR-00075  POSCAR-00086  POSCAR-00103
POSCAR-00024  POSCAR-00039  POSCAR-00076  POSCAR-00087
POSCAR-00025  POSCAR-00040  POSCAR-00077  POSCAR-00088
POSCAR-00026  POSCAR-00041  POSCAR-00078  POSCAR-00089
POSCAR-00027  POSCAR-00042  POSCAR-00079  POSCAR-00096
% ls POSCAR-0*<span class="p">|</span>wc -l
      <span class="m">51</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">displacements:</span> <span class="pre">111</span></code> shows the number of supercells with
displacements when this is run without <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code>
option. <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">displacement</span> <span class="pre">supercell</span> <span class="pre">files</span> <span class="pre">created:</span> <span class="pre">51</span></code> gives
the contracted number of supercells with displacements by
<code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option. There number of <code class="docutils literal notranslate"><span class="pre">POSCAR-0xxxx</span></code> files is found 51.
At this step, a special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> is created. This
contains information on this contraction and used in the other
calculation step, therefore this file must be kept carefully.</p>
</div>
<div class="section" id="supercell-files">
<h3><a class="toc-backref" href="#id4">Supercell files</a><a class="headerlink" href="#supercell-files" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">POSCAR-xxxxx</span></code> (in the other calculator interface, the prefix of the
filename is different) are not generated if distance between a pair of
atoms to be displaced is larger than the specified cutoff pair
distance. The indexing number (<code class="docutils literal notranslate"><span class="pre">xxxxx</span></code>) corresponds to that of the
case without setting this option, i.e., the same <code class="docutils literal notranslate"><span class="pre">POSCAR-xxxxx</span></code>
files are created for the same configurations of pairs of
displacements but <code class="docutils literal notranslate"><span class="pre">POSCAR-xxxxx</span></code> files not being included are not
generated. The reason of this indexing is that it can be useful when
changing the cutoff-pair-distance.</p>
</div>
<div class="section" id="special-phono3py-disp-yaml">
<h3><a class="toc-backref" href="#id5">Special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code></a><a class="headerlink" href="#special-phono3py-disp-yaml" title="Permalink to this headline">#</a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option together with <code class="docutils literal notranslate"><span class="pre">-d</span></code> option, a special
<code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> is created. This contains information on distances
between displaced atomic-pairs and whether those pairs are to be
computed or not. This special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> is necessary to create
fc3, therefore be careful not to overwrite it by running the option
<code class="docutils literal notranslate"><span class="pre">-d</span></code> without <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> or with different <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code>
with different value.</p>
</div>
<div class="section" id="making-forces-fc3">
<h3><a class="toc-backref" href="#id6">Making <code class="docutils literal notranslate"><span class="pre">FORCES_FC3</span></code></a><a class="headerlink" href="#making-forces-fc3" title="Permalink to this headline">#</a></h3>
<p>To create <code class="docutils literal notranslate"><span class="pre">FORCES_FC3</span></code>, only output files of the supercells created
using <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option are passed to <code class="docutils literal notranslate"><span class="pre">phono3py</span></code> as the
arguments. The special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> file is necessary to be
located at current directory.</p>
<p>An example is shown below for the Si example. Here, it is supposed
that forces are calculated using VASP in <code class="docutils literal notranslate"><span class="pre">disp-xxxxx</span></code>
directories. After running force calculations, there should be the
output file containing forces in each directory (for VASP
<code class="docutils literal notranslate"><span class="pre">vasprun.xml</span></code>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% phono3py --cf3 disp-<span class="o">{</span><span class="m">00001</span>,00002,00003,00016,00017,00018,00019,00024,00025,00026,00027,00032,00033,00034,00035,00036,00037,00038,00039,00040,00041,00042,00043,00070,00071,00072,00073,00074,00075,00076,00077,00078,00079,00080,00081,00082,00083,00084,00085,00086,00087,00088,00089,00096,00097,00098,00099,00100,00101,00102,00103<span class="o">}</span>/vasprun.xml
...

Displacement dataset is <span class="nb">read</span> from phono3py_disp.yaml.
counter <span class="o">(</span>file index<span class="o">)</span>: <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span> <span class="m">9</span> <span class="m">10</span> <span class="m">11</span> <span class="m">12</span> <span class="m">13</span> <span class="m">14</span> <span class="m">15</span> <span class="m">16</span> <span class="m">17</span> <span class="m">18</span> <span class="m">19</span> <span class="m">20</span> <span class="m">21</span> <span class="m">22</span> <span class="m">23</span> <span class="m">24</span> <span class="m">25</span> <span class="m">26</span> <span class="m">27</span> <span class="m">28</span> <span class="m">29</span> <span class="m">30</span> <span class="m">31</span> <span class="m">32</span> <span class="m">33</span> <span class="m">34</span> <span class="m">35</span> <span class="m">36</span> <span class="m">37</span> <span class="m">38</span> <span class="m">39</span> <span class="m">40</span> <span class="m">41</span> <span class="m">42</span> <span class="m">43</span> <span class="m">44</span> <span class="m">45</span> <span class="m">46</span> <span class="m">47</span> <span class="m">48</span> <span class="m">49</span> <span class="m">50</span> <span class="m">51</span>
FORCES_FC3 has been created.
</pre></div>
</div>
<p>Using <a class="reference internal" href="command-options.html#cf3-file-option"><span class="std std-ref">–cf3-file option</span></a> may be recommended
when the number of force files is large.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% <span class="k">for</span> i <span class="k">in</span> <span class="sb">`</span>ls POSCAR-0*<span class="p">|</span>sed s/POSCAR-//<span class="sb">`</span><span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> disp-<span class="nv">$i</span>/vasprun.xml<span class="p">;</span><span class="k">done</span> &gt; file_list.dat
% phono3py --cf3-file file_list.dat
</pre></div>
</div>
<p>Using a python script, <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> is easily parsed. So
it is also easy to create the file list by a python
script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">phono3py.interface.phono3py_yaml</span> <span class="kn">import</span> <span class="n">Phono3pyYaml</span>

<span class="n">p3yaml</span> <span class="o">=</span> <span class="n">Phono3pyYaml</span><span class="p">()</span>
<span class="n">p3yaml</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;phono3py_disp.yaml&quot;</span><span class="p">)</span>
<span class="n">dds</span> <span class="o">=</span> <span class="n">p3yaml</span><span class="o">.</span><span class="n">dataset</span>
<span class="n">file_name_tmpl</span> <span class="o">=</span> <span class="s2">&quot;disp-</span><span class="si">%05d</span><span class="s2">/vasprun.xml&quot;</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">d1</span> <span class="ow">in</span> <span class="n">dds</span><span class="p">[</span><span class="s1">&#39;first_atoms&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">file_name_tmpl</span> <span class="o">%</span> <span class="n">count</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">d1</span> <span class="ow">in</span> <span class="n">dds</span><span class="p">[</span><span class="s1">&#39;first_atoms&#39;</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">d2</span> <span class="ow">in</span> <span class="n">d1</span><span class="p">[</span><span class="s1">&#39;second_atoms&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">d2</span><span class="p">[</span><span class="s1">&#39;included&#39;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">file_name_tmpl</span> <span class="o">%</span> <span class="n">count</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="running-phonon-phonon-interaction-calculation">
<h3><a class="toc-backref" href="#id7">Running phonon-phonon interaction calculation</a><a class="headerlink" href="#running-phonon-phonon-interaction-calculation" title="Permalink to this headline">#</a></h3>
<p>To create fc3, <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option is not necessary but the
special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> is required.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% phono3py
...

----------------------------- General settings -----------------------------
Run mode: None
HDF5 data compression filter: gzip
Crystal structure was <span class="nb">read</span> from <span class="s2">&quot;phono3py_disp.yaml&quot;</span>.
Supercell <span class="o">(</span>dim<span class="o">)</span>: <span class="o">[</span><span class="m">2</span> <span class="m">2</span> <span class="m">2</span><span class="o">]</span>
Primitive matrix:
  <span class="o">[</span><span class="m">0</span>.  <span class="m">0</span>.5 <span class="m">0</span>.5<span class="o">]</span>
  <span class="o">[</span><span class="m">0</span>.5 <span class="m">0</span>.  <span class="m">0</span>.5<span class="o">]</span>
  <span class="o">[</span><span class="m">0</span>.5 <span class="m">0</span>.5 <span class="m">0</span>. <span class="o">]</span>
Spacegroup: Fd-3m <span class="o">(</span><span class="m">227</span><span class="o">)</span>
Use -v option to watch primitive cell, unit cell, and supercell structures.
----------------------------- Force constants ------------------------------
Imposing translational and index exchange symmetry to fc2: False
Imposing translational and index exchange symmetry to fc3: False
Imposing symmetry of index exchange to fc3 <span class="k">in</span> reciprocal space: False
Displacement dataset <span class="k">for</span> fc3 was <span class="nb">read</span> from <span class="s2">&quot;phono3py_disp.yaml&quot;</span>.
Sets of supercell forces were <span class="nb">read</span> from <span class="s2">&quot;FORCES_FC3&quot;</span>.
Computing fc3<span class="o">[</span> <span class="m">1</span>, x, x <span class="o">]</span> using numpy.linalg.pinv with a displacement:
    <span class="o">[</span> <span class="m">0</span>.0300  <span class="m">0</span>.0000  <span class="m">0</span>.0000<span class="o">]</span>
Expanding fc3.
Cutting-off fc3 <span class="o">(</span>cut-off distance: <span class="m">5</span>.000000<span class="o">)</span>
Building atom mapping table...
Creating contracted fc3...
Writing fc3 to <span class="s2">&quot;fc3.hdf5&quot;</span>.
Max drift of fc3: <span class="m">0</span>.047748 <span class="o">(</span>yxz<span class="o">)</span> <span class="m">0</span>.047748 <span class="o">(</span>xyz<span class="o">)</span> <span class="m">0</span>.047748 <span class="o">(</span>xzy<span class="o">)</span>
Displacement dataset <span class="k">for</span> fc2 was <span class="nb">read</span> from <span class="s2">&quot;phono3py_disp.yaml&quot;</span>.
Sets of supercell forces were <span class="nb">read</span> from <span class="s2">&quot;FORCES_FC3&quot;</span>.
Writing fc2 to <span class="s2">&quot;fc2.hdf5&quot;</span>.
Max drift of fc2: -0.000001 <span class="o">(</span>zz<span class="o">)</span> -0.000001 <span class="o">(</span>zz<span class="o">)</span>
----------- None of ph-ph interaction calculation was performed. -----------

Summary of calculation was written <span class="k">in</span> <span class="s2">&quot;phono3py.yaml&quot;</span>.
...
</pre></div>
</div>
<p>Once <code class="docutils literal notranslate"><span class="pre">fc3.hdf5</span></code> and <code class="docutils literal notranslate"><span class="pre">fc2.hdf5</span></code> are created, <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code>
option and the special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> are not needed anymore.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% phono3py --mesh<span class="o">=</span><span class="s2">&quot;11 11 11&quot;</span> --fc3 --fc2 --br
...

  <span class="m">300</span>.0     <span class="m">108</span>.051    <span class="m">108</span>.051    <span class="m">108</span>.051      <span class="m">0</span>.000      <span class="m">0</span>.000     -0.000
...
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-script-extract-supercell-ids-from-phono3py-disp-yaml">
<h2><a class="toc-backref" href="#id8">A script extract supercell IDs from <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code></a><a class="headerlink" href="#a-script-extract-supercell-ids-from-phono3py-disp-yaml" title="Permalink to this headline">#</a></h2>
<p>The following script is an example to collect supercell IDs
with the cutoff-pair distance, for which <code class="docutils literal notranslate"><span class="pre">included:</span> <span class="pre">true</span></code> is used
to hook them. <code class="docutils literal notranslate"><span class="pre">duplicates</span></code> in <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> gives the pairs of
exactly same supercells having different IDs. Therefore one of each
pair is necessary to calculate. As a ratio, the number is not many,
but if we want to save very much the computational demand, it is good
to consider.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">phono3py.interface.phono3py_yaml</span> <span class="kn">import</span> <span class="n">Phono3pyYaml</span>

<span class="n">p3yaml</span> <span class="o">=</span> <span class="n">Phono3pyYaml</span><span class="p">()</span>
<span class="n">p3yaml</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;phono3py_disp.yaml&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">p3yaml</span><span class="o">.</span><span class="n">dataset</span>

<span class="n">disp_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">data1</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;first_atoms&#39;</span><span class="p">]:</span>
    <span class="n">disp_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data1</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">data1</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;first_atoms&#39;</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">data2</span> <span class="ow">in</span> <span class="n">data1</span><span class="p">[</span><span class="s1">&#39;second_atoms&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">data2</span><span class="p">[</span><span class="s1">&#39;included&#39;</span><span class="p">]:</span>
            <span class="n">disp_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data2</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>

<span class="c1"># To remove duplicates</span>
<span class="c1"># duplicates = dict(data[&#39;duplicates&#39;])</span>
<span class="c1"># disp_ids_nodup = [i for i in disp_ids if i not in duplicates]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%05d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">disp_ids</span><span class="p">]))</span>
</pre></div>
</div>
<p>Even for the case that <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> was created without
<code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code> option, if we replace the line in the above script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">data2</span><span class="p">[</span><span class="s1">&#39;included&#39;</span><span class="p">]:</span>
</pre></div>
</div>
<p>by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">data2</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">5.0</span><span class="p">:</span>  <span class="c1"># 5.0 is cutoff-pair distance</span>
</pre></div>
</div>
<p>we can find the supercell IDs almost equivalent to those obtained
above for <code class="docutils literal notranslate"><span class="pre">--cutoff-pair=&quot;5.0&quot;</span></code>.</p>
</div>
<div class="section" id="tests">
<h2><a class="toc-backref" href="#id9">Tests</a><a class="headerlink" href="#tests" title="Permalink to this headline">#</a></h2>
<div class="section" id="si-pbe">
<h3><a class="toc-backref" href="#id10">Si-PBE</a><a class="headerlink" href="#si-pbe" title="Permalink to this headline">#</a></h3>
<p>For testing, thermal conductivities with respect to <code class="docutils literal notranslate"><span class="pre">--cutoff-pair</span></code>
values are calculated as follows. Note that if <code class="docutils literal notranslate"><span class="pre">FORCES_FC3</span></code> for full
fc3 elements exists, the same <code class="docutils literal notranslate"><span class="pre">FORCES_FC3</span></code> file can be used for
generating contracted fc3 for each special <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% egrep <span class="s1">&#39;^\s+pair_distance&#39;</span> phono3py_disp.yaml<span class="p">|</span>awk <span class="s1">&#39;{print $2}&#39;</span><span class="p">|</span>sort<span class="p">|</span>uniq
<span class="m">0</span>.000000
<span class="m">2</span>.366961
<span class="m">3</span>.865232
<span class="m">4</span>.532386
<span class="m">5</span>.466263
<span class="m">5</span>.956722
<span class="m">6</span>.694777
<span class="m">7</span>.100884
<span class="m">7</span>.730463
<span class="m">9</span>.467845
% cp phono3py_disp.yaml phono3py_disp.orig.yaml
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..10<span class="o">}</span><span class="p">;</span><span class="k">do</span> <span class="nv">d</span><span class="o">=</span><span class="sb">`</span>grep pair_distance phono3py_disp.orig.yaml<span class="p">|</span>awk <span class="s1">&#39;{print $2}&#39;</span><span class="p">|</span>sort<span class="p">|</span>uniq<span class="p">|</span>sed <span class="s2">&quot;</span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="s2">q;d&quot;</span><span class="sb">`</span><span class="p">;</span> <span class="nv">d</span><span class="o">=</span><span class="k">$((</span>d+0.1<span class="k">))</span><span class="p">;</span> phono3py --cutoff-pair<span class="o">=</span><span class="nv">$d</span> -o <span class="nv">$i</span> -d --pa<span class="o">=</span><span class="s2">&quot;F&quot;</span> --dim<span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> -c POSCAR-unitcell<span class="p">;</span> mv phono3py_disp.yaml phono3py_disp.<span class="nv">$i</span>.yaml<span class="p">;</span> <span class="k">done</span>
% ls phono3py_disp.*.yaml
% ls phono3py_disp.*.yaml
phono3py_disp.10.yaml  phono3py_disp.5.yaml  phono3py_disp.9.yaml
phono3py_disp.2.yaml   phono3py_disp.6.yaml  phono3py_disp.orig.yaml
phono3py_disp.3.yaml   phono3py_disp.7.yaml
phono3py_disp.4.yaml   phono3py_disp.8.yaml
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..10<span class="o">}</span><span class="p">;</span><span class="k">do</span> grep number_of_pairs_in_cutoff phono3py_disp.<span class="nv">$i</span>.yaml<span class="p">;</span><span class="k">done</span>
number_of_pairs_in_cutoff: <span class="m">10</span>
number_of_pairs_in_cutoff: <span class="m">30</span>
number_of_pairs_in_cutoff: <span class="m">50</span>
number_of_pairs_in_cutoff: <span class="m">55</span>
number_of_pairs_in_cutoff: <span class="m">75</span>
number_of_pairs_in_cutoff: <span class="m">95</span>
number_of_pairs_in_cutoff: <span class="m">103</span>
number_of_pairs_in_cutoff: <span class="m">108</span>
number_of_pairs_in_cutoff: <span class="m">110</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..10<span class="o">}</span><span class="p">;</span><span class="k">do</span> cp phono3py_disp.<span class="nv">$i</span>.yaml phono3py_disp.yaml<span class="p">;</span> phono3py --mesh<span class="o">=</span><span class="s2">&quot;11 11 11&quot;</span> --br<span class="p">|</span>tee std.<span class="nv">$i</span>.out<span class="p">;</span><span class="k">done</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..10<span class="o">}</span><span class="p">;</span><span class="k">do</span> egrep <span class="s1">&#39;^\s+300&#39;</span> std.<span class="nv">$i</span>.out<span class="p">;</span><span class="k">done</span>
  <span class="m">300</span>.0     <span class="m">123</span>.606    <span class="m">123</span>.606    <span class="m">123</span>.606     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">118</span>.617    <span class="m">118</span>.617    <span class="m">118</span>.617     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">118</span>.818    <span class="m">118</span>.818    <span class="m">118</span>.818     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">118</span>.879    <span class="m">118</span>.879    <span class="m">118</span>.879     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.468    <span class="m">119</span>.468    <span class="m">119</span>.468     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.489    <span class="m">119</span>.489    <span class="m">119</span>.489     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.501    <span class="m">119</span>.501    <span class="m">119</span>.501     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.483    <span class="m">119</span>.483    <span class="m">119</span>.483     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.481    <span class="m">119</span>.481    <span class="m">119</span>.481     -0.000     -0.000      <span class="m">0</span>.000
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..10<span class="o">}</span><span class="p">;</span><span class="k">do</span> cp phono3py_disp.<span class="nv">$i</span>.yaml phono3py_disp.yaml<span class="p">;</span> phono3py --sym-fc --mesh<span class="o">=</span><span class="s2">&quot;11 11 11&quot;</span> --br<span class="p">|</span>tee std.sym-<span class="nv">$i</span>.out<span class="p">;</span><span class="k">done</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..10<span class="o">}</span><span class="p">;</span><span class="k">do</span> egrep <span class="s1">&#39;^\s+300&#39;</span> std.sym-<span class="nv">$i</span>.out<span class="p">;</span><span class="k">done</span>
  <span class="m">300</span>.0     <span class="m">124</span>.650    <span class="m">124</span>.650    <span class="m">124</span>.650     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.765    <span class="m">119</span>.765    <span class="m">119</span>.765     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">118</span>.847    <span class="m">118</span>.847    <span class="m">118</span>.847     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">118</span>.782    <span class="m">118</span>.782    <span class="m">118</span>.782     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.471    <span class="m">119</span>.471    <span class="m">119</span>.471     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.366    <span class="m">119</span>.366    <span class="m">119</span>.366     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.350    <span class="m">119</span>.350    <span class="m">119</span>.350     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.339    <span class="m">119</span>.339    <span class="m">119</span>.339     -0.000     -0.000      <span class="m">0</span>.000
  <span class="m">300</span>.0     <span class="m">119</span>.337    <span class="m">119</span>.337    <span class="m">119</span>.337     -0.000     -0.000      <span class="m">0</span>.000
</pre></div>
</div>
</div>
<div class="section" id="aln-lda">
<h3><a class="toc-backref" href="#id11">AlN-LDA</a><a class="headerlink" href="#aln-lda" title="Permalink to this headline">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>% egrep <span class="s1">&#39;^\s+pair_distance&#39;</span> phono3py_disp.yaml<span class="p">|</span>awk <span class="s1">&#39;{print $2}&#39;</span><span class="p">|</span>sort<span class="p">|</span>uniq
<span class="m">0</span>.000000
<span class="m">1</span>.889907
<span class="m">1</span>.901086
<span class="m">3</span>.069402
<span class="m">3</span>.076914
<span class="m">3</span>.111000
<span class="m">3</span>.640065
<span class="m">3</span>.645881
<span class="m">4</span>.370303
<span class="m">4</span>.375582
<span class="m">4</span>.743307
<span class="m">4</span>.743308
<span class="m">4</span>.788360
<span class="m">4</span>.978000
<span class="m">5</span>.364501
<span class="m">5</span>.388410
<span class="m">5</span>.672503
<span class="m">5</span>.713938
<span class="m">5</span>.870162
<span class="m">6</span>.205027
<span class="m">6</span>.469591
<span class="m">7</span>.335901
% cp phono3py_disp.yaml phono3py_disp.orig.yaml
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..21<span class="o">}</span><span class="p">;</span><span class="k">do</span> <span class="nv">d</span><span class="o">=</span><span class="sb">`</span>grep pair_distance phono3py_disp.orig.yaml<span class="p">|</span>awk <span class="s1">&#39;{print $2}&#39;</span><span class="p">|</span>sort<span class="p">|</span>uniq<span class="p">|</span>sed <span class="s2">&quot;</span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="s2">q;d&quot;</span><span class="sb">`</span><span class="p">;</span> <span class="nv">d</span><span class="o">=</span><span class="k">$((</span>d+0.0001<span class="k">))</span><span class="p">;</span> phono3py --cutoff-pair<span class="o">=</span><span class="nv">$d</span> -o <span class="nv">$i</span> -d --dim<span class="o">=</span><span class="s2">&quot;3 3 2&quot;</span> -c POSCAR-unitcell<span class="p">;</span> mv phono3py_disp.yaml phono3py_disp.<span class="nv">$i</span>.yaml<span class="p">;</span> <span class="k">done</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..21<span class="o">}</span><span class="p">;</span><span class="k">do</span> grep number_of_pairs_in_cutoff phono3py_disp.<span class="nv">$i</span>.yaml<span class="p">;</span><span class="k">done</span>
number_of_pairs_in_cutoff: <span class="m">72</span>
number_of_pairs_in_cutoff: <span class="m">92</span>
number_of_pairs_in_cutoff: <span class="m">196</span>
number_of_pairs_in_cutoff: <span class="m">216</span>
number_of_pairs_in_cutoff: <span class="m">312</span>
number_of_pairs_in_cutoff: <span class="m">364</span>
number_of_pairs_in_cutoff: <span class="m">460</span>
number_of_pairs_in_cutoff: <span class="m">564</span>
number_of_pairs_in_cutoff: <span class="m">660</span>
number_of_pairs_in_cutoff: <span class="m">712</span>
number_of_pairs_in_cutoff: <span class="m">764</span>
number_of_pairs_in_cutoff: <span class="m">784</span>
number_of_pairs_in_cutoff: <span class="m">888</span>
number_of_pairs_in_cutoff: <span class="m">928</span>
number_of_pairs_in_cutoff: <span class="m">980</span>
number_of_pairs_in_cutoff: <span class="m">1020</span>
number_of_pairs_in_cutoff: <span class="m">1116</span>
number_of_pairs_in_cutoff: <span class="m">1156</span>
number_of_pairs_in_cutoff: <span class="m">1208</span>
number_of_pairs_in_cutoff: <span class="m">1248</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..21<span class="o">}</span><span class="p">;</span><span class="k">do</span> cp phono3py_disp.<span class="nv">$i</span>.yaml phono3py_disp.yaml<span class="p">;</span> phono3py --mesh<span class="o">=</span><span class="s2">&quot;13 13 9&quot;</span> --br --nac --io <span class="nv">$i</span><span class="p">|</span>tee std.<span class="nv">$i</span>.out<span class="p">;</span> <span class="k">done</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..21<span class="o">}</span><span class="p">;</span><span class="k">do</span> egrep <span class="s1">&#39;^\s+300\.0&#39;</span> std.<span class="nv">$i</span>.out<span class="p">;</span><span class="k">done</span>
  <span class="m">300</span>.0     <span class="m">205</span>.550    <span class="m">205</span>.550    <span class="m">193</span>.665     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">218</span>.963    <span class="m">218</span>.963    <span class="m">204</span>.942     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">213</span>.624    <span class="m">213</span>.624    <span class="m">193</span>.863     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">219</span>.932    <span class="m">219</span>.932    <span class="m">199</span>.819     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.516    <span class="m">235</span>.516    <span class="m">218</span>.843     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">234</span>.750    <span class="m">234</span>.750    <span class="m">217</span>.384     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">234</span>.355    <span class="m">234</span>.355    <span class="m">218</span>.030     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.381    <span class="m">235</span>.381    <span class="m">218</span>.609     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.996    <span class="m">235</span>.996    <span class="m">219</span>.785     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.220    <span class="m">236</span>.220    <span class="m">219</span>.867     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.161    <span class="m">236</span>.161    <span class="m">219</span>.298     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.096    <span class="m">236</span>.096    <span class="m">219</span>.313     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">234</span>.602    <span class="m">234</span>.602    <span class="m">217</span>.064     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.914    <span class="m">235</span>.914    <span class="m">218</span>.689     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.049    <span class="m">235</span>.049    <span class="m">217</span>.935     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.877    <span class="m">235</span>.877    <span class="m">219</span>.065     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.133    <span class="m">236</span>.133    <span class="m">219</span>.364     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.207    <span class="m">236</span>.207    <span class="m">219</span>.595     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.035    <span class="m">236</span>.035    <span class="m">219</span>.463     -0.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.104    <span class="m">236</span>.104    <span class="m">219</span>.348     -0.000     -0.000     -0.000
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..21<span class="o">}</span><span class="p">;</span><span class="k">do</span> cp phono3py_disp.<span class="nv">$i</span>.yaml phono3py_disp.yaml<span class="p">;</span> phono3py --mesh<span class="o">=</span><span class="s2">&quot;13 13 9&quot;</span> --br --nac --io <span class="nv">$i</span><span class="p">|</span>tee std.<span class="nv">$i</span>.out<span class="p">;</span> <span class="k">done</span><span class="p">|</span>tee std.sym-<span class="nv">$i</span>.out<span class="p">;</span> <span class="k">done</span>
% <span class="k">for</span> i <span class="k">in</span> <span class="o">{</span><span class="m">2</span>..21<span class="o">}</span><span class="p">;</span><span class="k">do</span> egrep <span class="s1">&#39;^\s+300\.0&#39;</span> std.sym-<span class="nv">$i</span>.out<span class="p">;</span><span class="k">done</span>
  <span class="m">300</span>.0     <span class="m">232</span>.964    <span class="m">232</span>.964    <span class="m">216</span>.333      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.442    <span class="m">235</span>.442    <span class="m">219</span>.602      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.521    <span class="m">235</span>.521    <span class="m">217</span>.767      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.581    <span class="m">235</span>.581    <span class="m">217</span>.687      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.837    <span class="m">236</span>.837    <span class="m">219</span>.933      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.020    <span class="m">236</span>.020    <span class="m">219</span>.324      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.482    <span class="m">235</span>.482    <span class="m">218</span>.633      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.313    <span class="m">236</span>.313    <span class="m">219</span>.677      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.308    <span class="m">236</span>.308    <span class="m">219</span>.955      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">236</span>.074    <span class="m">236</span>.074    <span class="m">219</span>.882      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.520    <span class="m">235</span>.520    <span class="m">219</span>.450      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.769    <span class="m">235</span>.769    <span class="m">219</span>.562      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.441    <span class="m">235</span>.441    <span class="m">219</span>.168      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.892    <span class="m">235</span>.892    <span class="m">219</span>.590      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.509    <span class="m">235</span>.509    <span class="m">219</span>.167      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.646    <span class="m">235</span>.646    <span class="m">219</span>.521      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.783    <span class="m">235</span>.783    <span class="m">219</span>.311      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.887    <span class="m">235</span>.887    <span class="m">219</span>.301      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.642    <span class="m">235</span>.642    <span class="m">219</span>.348      <span class="m">0</span>.000     -0.000     -0.000
  <span class="m">300</span>.0     <span class="m">235</span>.728    <span class="m">235</span>.728    <span class="m">219</span>.102      <span class="m">0</span>.000     -0.000     -0.000
</pre></div>
</div>
</div>
</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="workload-distribution.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Workload distribution</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="external-tools.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">External tools</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
      &copy; Copyright 2015, Atsushi Togo.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>